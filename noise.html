<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="groundwork/css/groundwork.css">
    <link rel="stylesheet" type="text/less" href="module.less">
    <script type="text/javascript" src="groundwork/js/libs/jquery-1.10.2.min.js"></script>
    <script type="text/javascript" src="groundwork/js/libs/modernizr-2.6.2.min.js"></script>
    <script type="text/javascript" src="underscore.js"></script>

</head>

<body id="noise" class="question-bg">
    <div class="container noise">
        <nav class="nav double-gap-top double-gap-bottom large blue animated fadeIn">
            <ul>
                <li>
                    <button data-target="info">簡介</button>
                </li>
                <li>
                    <button data-target="law">相關法規</button>
                </li>
                <li>
                    <button data-target="formula">相關公式</button>
                </li>
                <li>
                    <button data-target="check">檢查工具</button>
                </li>
                <li>
                    <button data-target="back">返回</button>
                </li>
            </ul>
        </nav>
        <div class="yellow box large animated bounceInUp" data-chosen="info">
            <div class="box info">

                <div class="row">
                    人體長期處在噪音的環境之中，會依音量強度及持續時間長短不同，對身體逐漸造成以下的傷害及疾病：聽力障礙、心血管疾病、破壞人體正常運作、精神障礙、消化道疾病、影響工作學習、容易緊張、影響生育功能、影響幼兒健康、更甚者可能導致死亡。
                </div>
                <br>
                <div class="row">
                    因噪音導致的聽力損失可概分為二：
                    <br>
                    <ol class="list">
                        <li class="list item red">傳音性之聽力損失，此類是由外傷所導致的，由於受巨大能量之突發性噪音（如：爆炸、放鞭炮或打靶…等突發性音源）產生強大壓力造成耳膜破裂造成之突發性聽力損失。</li>
                        <li class="list item red">感音性聽力損失，即因暴露於噪音環境下使聽力閾值提高的現象。此類聽力損失又可分為二類，當聽力損失在離開噪音環境一段時間後可恢復者，為感音性的疲勞，稱之為暫時性聽力損失（temporary threshold shift, TTS）。而長期暴露在噪音環境下，使毛細胞受損，造成聽力無法恢復的損傷，稱之為永久性聽力損失（permanent threshold shift, PTS）。</li>


                    </ol>
                </div>


            </div>
        </div>
        <div class="yellow box large hidden" data-chosen="law">
            <div class="box info">
                <div class="row">
                    <ul>
                        <li>勞工作業環境測定實施辦法 第六條第三款</li>
                        於噪音之室內作業場所，期勞工工作日食量平均音壓皆超過85分貝時，應每六個月檢定一次以上
                        <li>勞工安全衛生設施規則第300條 雇主對於發生噪音之工作場所，應依下列規定辦理：
                        </li>
                        <li>勞工工作場所因機械設備所發生之聲音超過九十分貝時，雇主應採取工程控制、減少勞工噪音暴露時間，使勞工噪音暴露工作日八小時日時量平均不超過(一)表列之規定值或相當之劑量值，且任何時間不得暴露於峰值超過一百四十分貝之衝擊性噪音或一百十五分貝之連續性噪音；對於勞工八小時日時量平均音壓級超過八十五分貝或暴露劑量超過百分之五十時，雇主應使勞工戴用有效之耳塞、耳罩等防音防護具。</li>
                        <li>勞工安全衛生法第五條第一項第八款 雇主對防止輻射線、高溫、低溫、超音波、噪音、振動、異常氣壓等引起之危害，應有符合標準之必要安全衛生設備。
                        </li>
                        <li>勞工安全衛生法施行細則第八條 有顯著發生噪音之室內作業場所應實施作業環境測定
                        </li>
                    </ul>

                </div>


            </div>

        </div>


        <div class="tabs ipad box info hidden" data-chosen="formula">
            <ul role="tablist">
                <li class="info active" role="tab" aria-controls="#formula-tab1">聲音強度</li>
                <li class="info" role="tab" aria-controls="#formula-tab2">Leq</li>
            </ul>
            <div class="row" id="formula-tab1" role="tabpanel">
                <div class="purple box large">
                    <div class="alert box gapped">
                        <span>每單位時間之內，通過垂直於行進方向上每單位面積的聲波能量</span>
                        <br>
                        <img src="src/ch17/1.png" style="height:2em">
                        <br>
                    </div>
                    <div class="alert box gapped">
                        <span>美國貝爾實驗室提出以對數方式來比較聲音強度，並稱之為「聲音強度位準」或「聲音強度級」</span>
                        <br>
                        <img src="src/ch17/2.png" style="height:6em">
                        <br>
                    </div>
                    <div class="alert box gapped">
                        <span>另種比較法，稱為「聲音功率位準」或「聲音功率級」</span>
                        <br>
                        <img src="src/ch17/3.png" style="height:6em">
                        <br>
                    </div>
                    <div class="alert box gapped">
                        <span>將聲音強度位準轉換為以音壓為計算量，稱之為「音壓位準」或「音壓級」</span>
                        <br>
                        <img src="src/ch17/4.png" style="height:6em">
                        <br>
                    </div>
                </div>


            </div>
            <div class="row" id="formula-tab2" role="tabpanel">
                <div class="purple box large">
                    <div class="alert box gapped">
                        <span>SEL：把單一噪音的能量，換算為一秒的累積能量，然後計算其音壓級</span>
                        <br>
                        <img src="src/ch17/6.png" style="height:4em">
                        <br>
                    </div>
                    <div class="alert box gapped">
                        <span>噪音暴露劑量</span>
                        <br>
                        <img src="src/ch17/7.png" style="height:6em">
                        <br>
                    </div>
                    <div class="alert box gapped">
                        <span>若有n個音壓值，其總和的SPL值</span>
                        <br>
                        <img src="src/ch17/8.png" style="height:2em">
                        <br>
                    </div>
                    <div class="alert box gapped">
                        <span>計算音壓級時，加入”距離”的考量
(R 為觀測處與機台間的距離，單位為公尺；r 為機台尺寸，分作大、中、小三種，其r值分別為 r = 0.15, 0.3, 1 m)</span>
                        <br>
                        <img src="src/ch17/9.png" style="height:2em">
                        <br>
                    </div>
                </div>

            </div>

        </div>
        <div class="tabs ipad box info hidden" data-chosen="check">
            <ul role="tablist">
                <li class="info active" role="tab" aria-controls="#check-tab1">均能音量</li>
                <li class="info" role="tab" aria-controls="#check-tab2">噪音暴露劑量</li>    
            </ul>
            <div class="row" id="check-tab1" role="tabpanel">
                <div class="row">
                    <div class="two fourth" style="font-size:2em">變動性噪音的均能音量</div>
                    <div class="one skip-one fourth align-center">
                        <button id="add-sound">新增</button>
                    </div>

                </div>
                <div class="row" style="font-size:2em">
                    傳入多個機台的音壓，可算出總共的音壓。
                
                </div>
                <div class="row sound gapped">
                    <div class="one fourth">
                        <input type="text" class="volume">
                    </div>
                </div>
                <div id="volumeResult"></div>
                <button id="getVolume">Submit</button>
            </div>
            <div class="row" id="check-tab2" role="tabpanel">
                <div class="row">        
                    <div class="padded five eighth large">
                        計算工作時的音壓，輸入每個時段的音壓與時間長短
                    </div>
                    <div class="padded one skip-two eighth">
                        <button id="add-work">Add</button>
                    </div>
                </div>
                <div class="row addWork">
                    <div class="one fifth align-center">
                        <label>時間長短(小時)：</label>
                    </div>
                    <div class="one fifth">
                        <input type="text" class="time">
                    </div>
                    <div class="one fifth align-center">
                        <label>音壓</label>
                    </div>
                    <div class="one fifth">
                        <select class="dB">
                            <option value="8">90 dB</option>
                            <option value="6">92 dB</option>
                            <option value="4">95 dB</option>
                            <option value="3">97 dB</option>
                            <option value="2">100 dB</option>
                            <option value="1">105 dB</option>
                            <option value="0.5">110 dB</option>
                            <option value="0.25">115 dB</option>
                        </select>
                    </div>
                </div>
                <div class="row padded" id="getTime">
                    <button>查詢</button>
                </div>
                <div class="row padded" id="resultVol">
                    
                </div>
            </div>
        </div>
    </div>

    <script type="text/javascript">
        var lastChosen = "info";
        var formatFloat = function (num, pos) {
            var size = Math.pow(10, pos);
            return Math.round(num * size) / size;
        }
        var btn = document.querySelectorAll("div.noise nav button");
        for (var j = 0; j < btn.length; j++) {
            btn[j].addEventListener('click', function () {
                if (lastChosen != "") {
                    document.querySelector("div[data-chosen=" + lastChosen + "]").className += " hidden";
                }
                var target = this.getAttribute("data-target");
                if (target == "back") {
                    window.location.href = "./index.html";
                } else {
                    var query = "div[data-chosen=" + target + "]";
                    var className = document.querySelector("div[data-chosen=" + target + "]").className;
                    var spl = className.split(" ");
                    lastChosen = target;
                    console.log("target:" + target);
                    spl = _.without(spl, 'hidden');
                    document.querySelector("div[data-chosen=" + target + "]").className = spl.join(" ");
                    if (target == "formula") {
                        document.querySelector("li[aria-controls='#form-tab1']").click();
                    }
                }
            });
        }
        document.getElementById('add-sound').addEventListener('click', function () {
            $('#volumeResult').before('<div class="row gapped sound"><div class="one fourth"><input type="text" class="volume"></div></div>');
        });

        document.getElementById("getVolume").addEventListener('click', function () {
            var vol = document.querySelectorAll('div.sound input.volume');
            var ans = 0;
            console.log(vol.length);
            for (var i = 0; i < vol.length; i++) {
                ans += Math.pow(10, parseFloat(vol[i].value) / 10);
            }
            ans = 10 * (Math.log(ans) / Math.LN10);
            document.getElementById('volumeResult').innerHTML = '<p class="message success gapped ">Leq: ' + formatFloat(ans,3) + '(dB)</p>';
        });
        document.getElementById('add-work').addEventListener('click', function(){
            var addData = '<div class="row addWork">\
                    <div class="one fifth align-center">\
                        <label>時間長短(小時)：</label>\
                    </div>\
                    <div class="one fifth">\
                        <input type="text" class="time">\
                    </div>\
                    <div class="one fifth align-center">\
                        <label>音壓</label>\
                    </div>\
                    <div class="one fifth">\
                        <select class="dB">\
                            <option value="8">90 dB</option>\
                            <option value="6">92 dB</option>\
                            <option value="4">95 dB</option>\
                            <option value="3">97 dB</option>\
                            <option value="2">100 dB</option>\
                            <option value="1">105 dB</option>\
                            <option value="0.5">110 dB</option>\
                            <option value="0.25">115 dB</option>\
                        </select>\
                    </div>\
                </div>';
            $('#getTime').before(addData);
        });
        document.getElementById('getTime').addEventListener('click', function(){
            var all = document.querySelectorAll('div.addWork');
            var test = 0;
            for(var i=0;i<all.length;i++){
                var time = all[i].querySelector('input.time').value;
                var dB = all[i].querySelector('select.dB').value;
                test += parseFloat(time)/parseFloat(dB);
            
            }
            if(test < 1){
                document.getElementById('resultVol').innerHTML = '<p class="message success gapped ">音壓符合</p>';
            }
            else{
                document.getElementById('resultVol').innerHTML = '<p class="message error gapped ">音壓不符合<br>第300條 雇主對於發生噪音之工作場所，應依下列規定辦理：<br>一、 勞工工作場所因機械設備所發生之聲音超過九十分貝時，雇主應採取工程控制、減少勞工噪音暴露時間，使勞工噪音暴露工作日八小時日時量平均不超過(一)表列之規定值或相當之劑量值，且任何時間不得暴露於峰值超過一百四十分貝之衝擊性噪音或一百十五分貝之連續性噪音；對於勞工八小時日時量平均音壓級超過八十五分貝或暴露劑量超過百分之五十時，雇主應使勞工戴用有效之耳塞、耳罩等防音防護具。</p>';
            }
        });
    </script>

    <script type="text/javascript" src="lesscss.js"></script>
    <script type="text/javascript" src="groundwork/js/groundwork.all.js"></script>
</body>

</html>



